

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pymrio.core package &mdash; pymrio 0.3.dev1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pymrio 0.3.dev1 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pymrio
          

          
          </a>

          
            
            
              <div class="version">
                0.3.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="exploring.html">Exploring the IO System</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_references.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pymrio</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>pymrio.core package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/pymrio.core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pymrio-core-package">
<h1>pymrio.core package<a class="headerlink" href="#pymrio-core-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pymrio.core.constants">
<span id="pymrio-core-constants-module"></span><h2>pymrio.core.constants module<a class="headerlink" href="#module-pymrio.core.constants" title="Permalink to this headline">¶</a></h2>
<p>Various constant values</p>
<p>KST 20140903</p>
</div>
<div class="section" id="module-pymrio.core.fileio">
<span id="pymrio-core-fileio-module"></span><h2>pymrio.core.fileio module<a class="headerlink" href="#module-pymrio.core.fileio" title="Permalink to this headline">¶</a></h2>
<p>Methods to load previously save mrios</p>
<dl class="function">
<dt id="pymrio.core.fileio.load">
<code class="descclassname">pymrio.core.fileio.</code><code class="descname">load</code><span class="sig-paren">(</span><em>path</em>, <em>recursive=False</em>, <em>ini=None</em>, <em>subini={}</em>, <em>include_core=True</em>, <em>only_coefficients=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.fileio.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a IOSystem or Extension from a ini files</p>
<p>This function can be used to load a IOSystem or Extension specified in a
ini file. DataFrames (tables) are loaded from text or binary pickle files.
For the latter, the extension .pkl or .pickle is assumed, in all other case
the tables are assumed to be in .txt format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> : string</p>
<blockquote>
<div><p>path or ini file name for the data to load</p>
</div></blockquote>
<p><strong>recursive</strong> : boolean, optional</p>
<blockquote>
<div><p>If True, load also the data in the subfolders and add them as
extensions to the IOSystem (in that case path must point to the root).
Only first order subfolders are considered (no subfolders in
subfolders) and if a folder does not contain a ini file it’s skipped.
Use the subini parameter in case of multiple ini files in a subfolder.
Attribute name of the extension in the IOSystem are based on the
subfolder name.  Default is False</p>
</div></blockquote>
<p><strong>ini</strong> : string, optional</p>
<blockquote>
<div><p>If there are several ini files in the root folder, take this one for
loading the data If None (default) take the ini found in the folder,
error if several are found</p>
</div></blockquote>
<p><strong>subini</strong> : dict, optional</p>
<blockquote>
<div><p>If there are multiple ini in the subfolder, use the ini given in the
dict.  Format: ‘subfoldername’:’ininame’ If a key for a subfolder is
not found or None (default), the ini found in the folder will be taken,
error if several are found</p>
</div></blockquote>
<p><strong>include_core</strong> : boolean, optional</p>
<blockquote>
<div><p>If False the load method does not include A, L and Z matrix. This
significantly reduces the required memory if the purpose is only
to analyse the results calculated beforehand.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">IOSystem or Extension class depending on systemtype in the ini file</p>
<blockquote class="last">
<div><p>None in case of errors</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pymrio.core.fileio.load_all">
<code class="descclassname">pymrio.core.fileio.</code><code class="descname">load_all</code><span class="sig-paren">(</span><em>path</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.fileio.load_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the whole IOSystem with Extensions given in path</p>
<p>This just calls pymrio.load with recursive = True. Apart from that the
same parameter can as for .load can be used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> : string</p>
<blockquote>
<div><p>path or ini file name for the data to load</p>
</div></blockquote>
<p><strong>**kwargs</strong> : key word arguments, optional</p>
<blockquote>
<div><p>This will be passed directly to the load method</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">IOSystem</p>
<p class="last">None in case of errors</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pymrio.core.fileio.load_test">
<code class="descclassname">pymrio.core.fileio.</code><code class="descname">load_test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.fileio.load_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a small test MRIO</p>
<p>The test system contains:</p>
<blockquote>
<div><ul class="simple">
<li>six regions,</li>
<li>seven sectors,</li>
<li>seven final demand categories</li>
<li>two extensions (emissions and factor_inputs)</li>
</ul>
</div></blockquote>
<p>The test system only contains Z, Y, F, FY. The rest can be calculated with
calc_all()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">IOSystem</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>For development: This function can be used as an example of how to parse an IOSystem</p>
</dd></dl>

</div>
<div class="section" id="module-pymrio.core.mriosystem">
<span id="pymrio-core-mriosystem-module"></span><h2>pymrio.core.mriosystem module<a class="headerlink" href="#module-pymrio.core.mriosystem" title="Permalink to this headline">¶</a></h2>
<p>Generic classes for pymrio</p>
<p>Classes and function here should not be used directly. Use the API methods from the pymrio module instead.</p>
<dl class="class">
<dt id="pymrio.core.mriosystem.CoreSystem">
<em class="property">class </em><code class="descclassname">pymrio.core.mriosystem.</code><code class="descname">CoreSystem</code><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This class is the base class for IOSystem and Extension</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.copy" title="pymrio.core.mriosystem.CoreSystem.copy"><code class="xref py py-obj docutils literal"><span class="pre">copy</span></code></a>()</td>
<td>Returns a deep copy of the system</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.get_DataFrame" title="pymrio.core.mriosystem.CoreSystem.get_DataFrame"><code class="xref py py-obj docutils literal"><span class="pre">get_DataFrame</span></code></a>([data,&nbsp;with_unit,&nbsp;with_population])</td>
<td>Yields all panda.DataFrames or there names</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.get_Y_categories" title="pymrio.core.mriosystem.CoreSystem.get_Y_categories"><code class="xref py py-obj docutils literal"><span class="pre">get_Y_categories</span></code></a>([entries])</td>
<td>Returns the names of y categories in the IOSystem as unique names in order</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.get_index" title="pymrio.core.mriosystem.CoreSystem.get_index"><code class="xref py py-obj docutils literal"><span class="pre">get_index</span></code></a>()</td>
<td>Returns the pure index of the DataFrames in the system</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.get_regions" title="pymrio.core.mriosystem.CoreSystem.get_regions"><code class="xref py py-obj docutils literal"><span class="pre">get_regions</span></code></a>([entries])</td>
<td>Returns the names of regions in the IOSystem as unique names in order</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.get_sectors" title="pymrio.core.mriosystem.CoreSystem.get_sectors"><code class="xref py py-obj docutils literal"><span class="pre">get_sectors</span></code></a>([entries])</td>
<td>Returns the names of sectors in the IOSystem as unique names in order</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.reset_full" title="pymrio.core.mriosystem.CoreSystem.reset_full"><code class="xref py py-obj docutils literal"><span class="pre">reset_full</span></code></a>()</td>
<td>Remove all accounts which can be recalculated.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.reset_to_coefficients" title="pymrio.core.mriosystem.CoreSystem.reset_to_coefficients"><code class="xref py py-obj docutils literal"><span class="pre">reset_to_coefficients</span></code></a>()</td>
<td>Keeps only the coefficient.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.reset_to_flows" title="pymrio.core.mriosystem.CoreSystem.reset_to_flows"><code class="xref py py-obj docutils literal"><span class="pre">reset_to_flows</span></code></a>()</td>
<td>Keeps only the absolute values.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.save" title="pymrio.core.mriosystem.CoreSystem.save"><code class="xref py py-obj docutils literal"><span class="pre">save</span></code></a>(path[,&nbsp;table_format,&nbsp;sep,&nbsp;table_ext,&nbsp;…])</td>
<td>Saves the system as text or binary pickle files.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.set_Y_categories" title="pymrio.core.mriosystem.CoreSystem.set_Y_categories"><code class="xref py py-obj docutils literal"><span class="pre">set_Y_categories</span></code></a>(Y_categories)</td>
<td>Sets new names for the Y_categories</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.set_regions" title="pymrio.core.mriosystem.CoreSystem.set_regions"><code class="xref py py-obj docutils literal"><span class="pre">set_regions</span></code></a>(regions)</td>
<td>Sets new names for the regions</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem.set_sectors" title="pymrio.core.mriosystem.CoreSystem.set_sectors"><code class="xref py py-obj docutils literal"><span class="pre">set_sectors</span></code></a>(sectors)</td>
<td>Sets new names for the sectors</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a deep copy of the system</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.get_DataFrame">
<code class="descname">get_DataFrame</code><span class="sig-paren">(</span><em>data=False</em>, <em>with_unit=True</em>, <em>with_population=True</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.get_DataFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields all panda.DataFrames or there names</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : boolean, optional</p>
<blockquote>
<div><p>If True, returns a generator which yields the DataFrames.
If False, returns a generator which yields only the names of the DataFrames</p>
</div></blockquote>
<p><strong>with_unit: boolean, optional</strong></p>
<blockquote>
<div><p>If True, includes the ‘unit’ DataFrame
If False, does not include the ‘unit’ DataFrame. The method than only yields the numerical data tables</p>
</div></blockquote>
<p><strong>with_population: boolean, optional</strong></p>
<blockquote>
<div><p>If True, includes the ‘population’ vector
If False, does not include the ‘population’ vector.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">DataFrames or string generator, depending on parameter data</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>For IOSystem this does not include the DataFrames in the extensions.</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.get_Y_categories">
<code class="descname">get_Y_categories</code><span class="sig-paren">(</span><em>entries=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.get_Y_categories" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of y categories in the IOSystem as unique names in order</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>entries</strong> : List, optional</p>
<blockquote>
<div><p>If given, retuns an list with None for all values not in entries.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Index</p>
<blockquote class="last">
<div><p>List of categories, None if no attribute to determine list is available</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.get_index">
<code class="descname">get_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.get_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the pure index of the DataFrames in the system</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.get_regions">
<code class="descname">get_regions</code><span class="sig-paren">(</span><em>entries=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.get_regions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of regions in the IOSystem as unique names in order</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>entries</strong> : List, optional</p>
<blockquote>
<div><p>If given, retuns an list with None for all values not in entries.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Index</p>
<blockquote class="last">
<div><p>List of regions, None if now attribute to determine list is available</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.get_sectors">
<code class="descname">get_sectors</code><span class="sig-paren">(</span><em>entries=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.get_sectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of sectors in the IOSystem as unique names in order</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>entries</strong> : List, optional</p>
<blockquote>
<div><p>If given, retuns an list with None for all values not in entries.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Index</p>
<blockquote class="last">
<div><p>List of sectors, None if no attribute to determine the list is available</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.reset_full">
<code class="descname">reset_full</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.reset_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all accounts which can be recalculated.</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.reset_to_coefficients">
<code class="descname">reset_to_coefficients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.reset_to_coefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps only the coefficient.</p>
<p>This can be used to recalculate the IO tables for a new finald demand.</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.reset_to_flows">
<code class="descname">reset_to_flows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.reset_to_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps only the absolute values.</p>
<p>This removes all attributes which can not be aggregated and must be
recalculated after the aggregation.</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>path</em>, <em>table_format='txt'</em>, <em>sep='\t'</em>, <em>table_ext=None</em>, <em>float_format='%.12g'</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the system as text or binary pickle files.</p>
<p>Tables (dataframes) of the current system are saved as text or binary pickle files, meta data (all other attributes) and the specifications of the tables are saved in a ini file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> : string</p>
<blockquote>
<div><p>path for the saved data (will be created if necessary, data within will be overwritten).
The path can contain the name for the ini file, otherwise this will be based on the name attribute.</p>
</div></blockquote>
<p><strong>table_format</strong> : string</p>
<blockquote>
<div><p>Format to save the DataFrames:</p>
<blockquote>
<div><ul class="simple">
<li>‘pkl’ : Binary pickle files, (alias: ‘pickle’, ‘bin’, ‘binary’)</li>
<li>‘txt’ : Text files, (alis: ‘text’) default</li>
</ul>
</div></blockquote>
</div></blockquote>
<p><strong>table_ext</strong> : string, optional</p>
<blockquote>
<div><p>File extension, default depends on table_format(.pkl for pickle, .txt for text)</p>
</div></blockquote>
<p><strong>sep</strong> : string, optional</p>
<blockquote>
<div><p>Field delimiter for the output file, only for txt files</p>
</div></blockquote>
<p><strong>float_format</strong> : string, optional</p>
<blockquote class="last">
<div><p>Format for saving the DataFrames, default = ‘%.12g’, only for txt files</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>For IOSystem this does not include the DataFrames in the extension (only the trade system itself).
Use save_all to save the whole system.</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.set_Y_categories">
<code class="descname">set_Y_categories</code><span class="sig-paren">(</span><em>Y_categories</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.set_Y_categories" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets new names for the Y_categories</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>Y_categories</strong> : list or dict</p>
<blockquote class="last">
<div><p>In case of dict: {‘old_name’ :  ‘new_name’} with a entry for each old_name which should be renamed
In case of list: List of new names in order and complete without repetition</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.set_regions">
<code class="descname">set_regions</code><span class="sig-paren">(</span><em>regions</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.set_regions" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets new names for the regions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>regions</strong> : list or dict</p>
<blockquote class="last">
<div><p>In case of dict: {‘old_name’ :  ‘new_name’} with a entry for each old_name which should be renamed
In case of list: List of new names in order and complete without repetition</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.CoreSystem.set_sectors">
<code class="descname">set_sectors</code><span class="sig-paren">(</span><em>sectors</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.CoreSystem.set_sectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets new names for the sectors</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sectors</strong> : list or dict</p>
<blockquote class="last">
<div><p>In case of dict: {‘old_name’ :  ‘new_name’} with a entry for each old_name which should be renamed
In case of list: List of new names in order and complete without repetition</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pymrio.core.mriosystem.Extension">
<em class="property">class </em><code class="descclassname">pymrio.core.mriosystem.</code><code class="descname">Extension</code><span class="sig-paren">(</span><em>name</em>, <em>F=None</em>, <em>FY=None</em>, <em>S=None</em>, <em>M=None</em>, <em>D_fp=None</em>, <em>D_terr=None</em>, <em>D_imp=None</em>, <em>D_exp=None</em>, <em>unit=None</em>, <em>iosystem=None</em>, <em>version=None</em>, <em>year=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.Extension" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem" title="pymrio.core.mriosystem.CoreSystem"><code class="xref py py-class docutils literal"><span class="pre">pymrio.core.mriosystem.CoreSystem</span></code></a></p>
<p>Class which gathers all information for one extension of the IOSystem</p>
<p class="rubric">Notes</p>
<p>For the total accounts (<a href="#id3"><span class="problematic" id="id4">D_</span></a>) also reginal (appendix _reg) and
per capita (appendix _cap) are possible.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="97%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>name</td>
<td>(string) Every extension must have a name. This can (recommended) be the name of the instance. However, for plotting and saving this can also be changed.  This name will also be used for saving the extension as prefix to the attributes.</td>
</tr>
<tr class="row-even"><td>F</td>
<td>(pandas.DataFrame) Total direct impacts with columns as Z. Index with ([‘stressor’, ‘compartment’]). The second level ‘compartment’ is optional</td>
</tr>
<tr class="row-odd"><td>FY</td>
<td>(pandas.DataFrame) Extension of final demand with columns a y and index as F</td>
</tr>
<tr class="row-even"><td>S</td>
<td>(pandas.DataFrame) Direct impact (extensions) coefficients with multiindex as F</td>
</tr>
<tr class="row-odd"><td>M</td>
<td>(pandas.DataFrame) Multipliers with multiindex as F</td>
</tr>
<tr class="row-even"><td>D_fp</td>
<td>(pandas.DataFrame) Footprint of consumption,  further specification with _reg (per region) or _cap (per capita) possible</td>
</tr>
<tr class="row-odd"><td>D_terr</td>
<td>(pandas.DataFrame) Territorial accounts, further specification with _reg (per region) or _cap (per capita) possible</td>
</tr>
<tr class="row-even"><td>D_imp</td>
<td>(pandas.DataFrame) Import accounts (amount of ‘extension’ embodied in imports), further specification with _reg (per region) or _cap (per capita) possible</td>
</tr>
<tr class="row-odd"><td>D_exp</td>
<td>(pandas.DataFrame) Export accounts (amount of ‘extension’ embodied in exports), further specification with _reg (per region) or _cap (per capita) possible</td>
</tr>
<tr class="row-even"><td>unit</td>
<td>(pandas.DataFrame) Unit for each row of the extension</td>
</tr>
<tr class="row-odd"><td>iosystem</td>
<td>(string) Note for the IOSystem, recommended to be ‘pxp’ or ‘ixi’ for product by product or industry by industry. However, this can be any string and can have more information if needed (eg for different technoloy assumptions) The string will be passed to the Extension</td>
</tr>
<tr class="row-even"><td>version</td>
<td>(string) This can be used as a version tracking system.</td>
</tr>
<tr class="row-odd"><td>year</td>
<td>(int) Baseyear of the extension data</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.Extension.calc_system" title="pymrio.core.mriosystem.Extension.calc_system"><code class="xref py py-obj docutils literal"><span class="pre">calc_system</span></code></a>(x,&nbsp;Y_agg[,&nbsp;L,&nbsp;population])</td>
<td>Calculates the missing part of the extension plus accounts</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">copy</span></code>()</td>
<td>Returns a deep copy of the system</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.Extension.diag_stressor" title="pymrio.core.mriosystem.Extension.diag_stressor"><code class="xref py py-obj docutils literal"><span class="pre">diag_stressor</span></code></a>(stressor[,&nbsp;name])</td>
<td>Diagonalize one row of the stressor matrix for a flow analysis.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_DataFrame</span></code>([data,&nbsp;with_unit,&nbsp;with_population])</td>
<td>Yields all panda.DataFrames or there names</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">get_Y_categories</span></code>([entries])</td>
<td>Returns the names of y categories in the IOSystem as unique names in order</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_index</span></code>()</td>
<td>Returns the pure index of the DataFrames in the system</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">get_regions</span></code>([entries])</td>
<td>Returns the names of regions in the IOSystem as unique names in order</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.Extension.get_row_data" title="pymrio.core.mriosystem.Extension.get_row_data"><code class="xref py py-obj docutils literal"><span class="pre">get_row_data</span></code></a>(row[,&nbsp;name])</td>
<td>Returns a dict with all available data for a row in the extension</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.Extension.get_rows" title="pymrio.core.mriosystem.Extension.get_rows"><code class="xref py py-obj docutils literal"><span class="pre">get_rows</span></code></a>()</td>
<td>Returns the name of the rows of the extension</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_sectors</span></code>([entries])</td>
<td>Returns the names of sectors in the IOSystem as unique names in order</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.Extension.per_source" title="pymrio.core.mriosystem.Extension.per_source"><code class="xref py py-obj docutils literal"><span class="pre">per_source</span></code></a>([name])</td>
<td>Returns a extension disaggregated into the regional source</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.Extension.plot_account" title="pymrio.core.mriosystem.Extension.plot_account"><code class="xref py py-obj docutils literal"><span class="pre">plot_account</span></code></a>(row[,&nbsp;per_capita,&nbsp;sector,&nbsp;…])</td>
<td>Plots D_terr, D_fp, D_imp and D_exp for the specified row (account)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.Extension.report_accounts" title="pymrio.core.mriosystem.Extension.report_accounts"><code class="xref py py-obj docutils literal"><span class="pre">report_accounts</span></code></a>(path[,&nbsp;per_region,&nbsp;…])</td>
<td>Writes a report to the given path for the regional accounts</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">reset_full</span></code>()</td>
<td>Remove all accounts which can be recalculated.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">reset_to_coefficients</span></code>()</td>
<td>Keeps only the coefficient.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">reset_to_flows</span></code>()</td>
<td>Keeps only the absolute values.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">save</span></code>(path[,&nbsp;table_format,&nbsp;sep,&nbsp;table_ext,&nbsp;…])</td>
<td>Saves the system as text or binary pickle files.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">set_Y_categories</span></code>(Y_categories)</td>
<td>Sets new names for the Y_categories</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">set_regions</span></code>(regions)</td>
<td>Sets new names for the regions</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">set_sectors</span></code>(sectors)</td>
<td>Sets new names for the sectors</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pymrio.core.mriosystem.Extension.calc_system">
<code class="descname">calc_system</code><span class="sig-paren">(</span><em>x</em>, <em>Y_agg</em>, <em>L=None</em>, <em>population=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.Extension.calc_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the missing part of the extension plus accounts</p>
<p>This method uses y aggregated across specified y categories</p>
<p>Calculates:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>for each sector and country:</dt>
<dd>D, M, D_fp, D_terr_sector, D_imp_sector, D_exp_sector</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>for each region:</dt>
<dd>D_fp_reg, D_terr_reg, D_imp_reg, D_exp_reg,</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>for each region (if population vector is given):</dt>
<dd>D_fp_cap, D_terr_cap, D_imp_cap, D_exp_cap</dd>
</dl>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : pandas.DataFrame or numpy.array</p>
<blockquote>
<div><p>Industry output column vector</p>
</div></blockquote>
<p><strong>Y_agg</strong> : pandas.DataFrame or np.array</p>
<blockquote>
<div><p>The final demand aggregated (one category per country)</p>
</div></blockquote>
<p><strong>L</strong> : pandas.DataFrame or numpy.array, optional</p>
<blockquote>
<div><p>Leontief input output table L. If this is not given,
the method recalculates M based on D_fp (must be present in
the extension).</p>
</div></blockquote>
<p><strong>population</strong> : pandas.DataFrame or np.array, optional</p>
<blockquote class="last">
<div><p>Row vector with population per region</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Only attributes which are not None are recalculated (for D_* this is
checked for each group (reg, cap, and w/o appendix)).</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.Extension.diag_stressor">
<code class="descname">diag_stressor</code><span class="sig-paren">(</span><em>stressor</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.Extension.diag_stressor" title="Permalink to this definition">¶</a></dt>
<dd><p>Diagonalize one row of the stressor matrix for a flow analysis.</p>
<p>This method takes one row of the F matrix and diagonalize
to the full region/sector format. Footprints calculation based
on this matrix show the flow of embodied stressors from the source
region/sector (row index) to the final consumer (column index).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>stressor</strong> : str or int - valid index for one row of the F matrix</p>
<blockquote>
<div><p>This must be a tuple for a multiindex, a string otherwise.
The stressor to diagonalize.</p>
</div></blockquote>
<p><strong>name</strong> : string (optional)</p>
<blockquote>
<div><p>The new name for the extension,
if None (default): string based on the given stressor (row name)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Extension</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.Extension.get_row_data">
<code class="descname">get_row_data</code><span class="sig-paren">(</span><em>row</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.Extension.get_row_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict with all available data for a row in the extension</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>row</strong> : tuple, list, string</p>
<blockquote>
<div><p>A valid index for the extension DataFrames</p>
</div></blockquote>
<p><strong>name</strong> : string, optional</p>
<blockquote>
<div><p>If given, adds a key ‘name’ with the given value to the dict. In
that case the dict can be
used directly to build a new extension.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict object with the data (pandas DataFrame)for the specific rows</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.Extension.get_rows">
<code class="descname">get_rows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.Extension.get_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the rows of the extension</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.Extension.per_source">
<code class="descname">per_source</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.Extension.per_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a extension disaggregated into the regional source</p>
<p>DEPRECATED: The new method ‘build_flow_matrix’ is more powerful
and calculate per source region and per source sector. These can be
aggregated to one (or several) sectors with the standard aggregation
routine. The method here will be deleted in the next versions.</p>
<p>The returned extension included F, FY if present in the original
extension, and units.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : string (optional)</p>
<blockquote>
<div><p>The new name for the extension,
if None (default): original name + ‘per source region’</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Extension</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This method changes the order of the accounts lexicographically.</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.Extension.plot_account">
<code class="descname">plot_account</code><span class="sig-paren">(</span><em>row</em>, <em>per_capita=False</em>, <em>sector=None</em>, <em>file_name=False</em>, <em>file_dpi=600</em>, <em>population=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.Extension.plot_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots D_terr, D_fp, D_imp and D_exp for the specified row (account)</p>
<p>Plot either the total country accounts or for a specific sector,
depending on the ‘sector’ parameter.</p>
<p>Per default the accounts are plotted as bar charts.
However, any valid keyword for the pandas.DataFrame.plot
method can be passed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>row</strong> : string, tuple or int</p>
<blockquote>
<div><p>A valid index for the row in the extension which
should be plotted (one(!) row - no list allowed)</p>
</div></blockquote>
<p><strong>per_capita</strong> : boolean, optional</p>
<blockquote>
<div><p>Plot the per capita accounts instead of the absolute values
default is False</p>
</div></blockquote>
<p><strong>sector: string, optional</strong></p>
<blockquote>
<div><p>Plot the results for a specific sector of the IO table. If
None is given (default), the total regional accounts are plotted.</p>
</div></blockquote>
<p><strong>population</strong> : pandas.DataFrame or np.array, optional</p>
<blockquote>
<div><p>Vector with population per region. This must be given if
values should be plotted per_capita for a specific sector since
these values are calculated on the fly.</p>
</div></blockquote>
<p><strong>file_name</strong> : path string, optional</p>
<blockquote>
<div><p>If given, saves the plot to the given filename</p>
</div></blockquote>
<p><strong>file_dpi</strong> : int, optional</p>
<blockquote>
<div><p>Dpi for saving the figure, default 600</p>
</div></blockquote>
<p><strong>**kwargs</strong> : key word arguments, optional</p>
<blockquote>
<div><p>This will be passed directly to the pd.DataFrame.plot method</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Axis as given by pandas.DataFrame.plot, None in case of errors</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This looks prettier with the seaborn module
(import seaborn before calling this method)</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.Extension.report_accounts">
<code class="descname">report_accounts</code><span class="sig-paren">(</span><em>path</em>, <em>per_region=True</em>, <em>per_capita=False</em>, <em>pic_size=1000</em>, <em>format='rst'</em>, <em>ffname=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.Extension.report_accounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a report to the given path for the regional accounts</p>
<p>The report consists of a text file and a folder with the pics
(both names following parameter name)</p>
<p class="rubric">Notes</p>
<p>This looks prettier with the seaborn module
(import seaborn before calling this method)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> : string</p>
<blockquote>
<div><p>Root path for the report</p>
</div></blockquote>
<p><strong>per_region</strong> : boolean, optional</p>
<blockquote>
<div><p>If true, reports the accounts per region</p>
</div></blockquote>
<p><strong>per_capita</strong> : boolean, optional</p>
<blockquote>
<div><p>If true, reports the accounts per capita
If per_capita and per_region are False, nothing will be done</p>
</div></blockquote>
<p><strong>pic_size</strong> : int, optional</p>
<blockquote>
<div><p>size for the figures in px, 1000 by default</p>
</div></blockquote>
<p><strong>format</strong> : string, optional</p>
<blockquote>
<div><p>file format of the report:
‘rst’(default), ‘html’, ‘latex’, …
except for rst all depend on the module docutils (all writer_name
from docutils can be used as format)</p>
</div></blockquote>
<p><strong>ffname</strong> : string, optional</p>
<blockquote>
<div><p>root file name (without extension, per_capita or per_region will be
attached) and folder names If None gets passed (default), self.name
with be modified to get a valid name for the operation system
without blanks</p>
</div></blockquote>
<p><strong>**kwargs</strong> : key word arguments, optional</p>
<blockquote class="last">
<div><p>This will be passed directly to the pd.DataFrame.plot method
(through the self.plot_account method)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pymrio.core.mriosystem.IOSystem">
<em class="property">class </em><code class="descclassname">pymrio.core.mriosystem.</code><code class="descname">IOSystem</code><span class="sig-paren">(</span><em>Z=None</em>, <em>Y=None</em>, <em>A=None</em>, <em>x=None</em>, <em>L=None</em>, <em>unit=None</em>, <em>population=None</em>, <em>iosystem=None</em>, <em>version=None</em>, <em>year=None</em>, <em>price=None</em>, <em>name='IO'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pymrio.core.mriosystem.CoreSystem" title="pymrio.core.mriosystem.CoreSystem"><code class="xref py py-class docutils literal"><span class="pre">pymrio.core.mriosystem.CoreSystem</span></code></a></p>
<p>Class containing a whole EE MRIO System</p>
<p>The class collects pandas dataframes for a whole EE MRIO system. The
attributes for the trade matrices (Z, L, A, x, Y) can be set directly,
extensions are given as dictionaries containing F, FY, D, m, D_fp, D_terr,
D_imp, D_exp</p>
<p class="rubric">Notes</p>
<p>The attributes and extension dictionary entries are pandas.DataFrame with
an MultiIndex.  This index must have the specified level names.</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="97%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Z</td>
<td>(pandas.DataFrame) Symetric input output table (flows) with country and sectors as MultiIndex with names ‘region’ and ‘sector’ for columns and index</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>(pandas.DataFrame) final demand with MultiIndex with index.names = ([‘region’, ‘sector’]) and column.names = ([‘region’, ‘category’])</td>
</tr>
<tr class="row-odd"><td>A</td>
<td>(pandas.DataFrame) coefficient input output table, MultiTndex as Z</td>
</tr>
<tr class="row-even"><td>L</td>
<td>(pandas.DataFrame) Leontief, MultiTndex as Z</td>
</tr>
<tr class="row-odd"><td>unit</td>
<td>(pandas.DataFrame) Unit for each row of Z</td>
</tr>
<tr class="row-even"><td>iosystem</td>
<td>(string) Note for the IOSystem, recommended to be ‘pxp’ or ‘ixi’ for product by product or industry by industry. However, this can be any string and can have more information if needed (eg for different technoloy assumptions) The string will be passed to the IOSystem</td>
</tr>
<tr class="row-odd"><td>version</td>
<td>(string) This can be used as a version tracking system.</td>
</tr>
<tr class="row-even"><td>year</td>
<td>(string or int) Baseyear of the IOSystem</td>
</tr>
<tr class="row-odd"><td>price</td>
<td>(string) Price system of the IO (current or constant prices)</td>
</tr>
<tr class="row-even"><td>name</td>
<td>(string, optional) Name of the IOSystem, default is ‘IO’</td>
</tr>
<tr class="row-odd"><td><a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs</td>
<td>(dictonary) Extensions are given as dictionaries and will be passed to the Extension class.  The dict must contain a key with a value for ‘name’, this can be the same as the name of the dict.  For the further keys see class Extension</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.aggregate" title="pymrio.core.mriosystem.IOSystem.aggregate"><code class="xref py py-obj docutils literal"><span class="pre">aggregate</span></code></a>([region_agg,&nbsp;sector_agg,&nbsp;…])</td>
<td>Aggregates the IO system.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.calc_all" title="pymrio.core.mriosystem.IOSystem.calc_all"><code class="xref py py-obj docutils literal"><span class="pre">calc_all</span></code></a>()</td>
<td>Calculates missing parts of the IOSystem and all extensions.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.calc_extensions" title="pymrio.core.mriosystem.IOSystem.calc_extensions"><code class="xref py py-obj docutils literal"><span class="pre">calc_extensions</span></code></a>([extensions,&nbsp;Y_agg])</td>
<td>Calculates the extension and their accounts</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.calc_system" title="pymrio.core.mriosystem.IOSystem.calc_system"><code class="xref py py-obj docutils literal"><span class="pre">calc_system</span></code></a>()</td>
<td>Calculates the missing part of the core IOSystem</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">copy</span></code>()</td>
<td>Returns a deep copy of the system</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_DataFrame</span></code>([data,&nbsp;with_unit,&nbsp;with_population])</td>
<td>Yields all panda.DataFrames or there names</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">get_Y_categories</span></code>([entries])</td>
<td>Returns the names of y categories in the IOSystem as unique names in order</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.get_extensions" title="pymrio.core.mriosystem.IOSystem.get_extensions"><code class="xref py py-obj docutils literal"><span class="pre">get_extensions</span></code></a>([data])</td>
<td>Yields the extensions or their names</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">get_index</span></code>()</td>
<td>Returns the pure index of the DataFrames in the system</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_regions</span></code>([entries])</td>
<td>Returns the names of regions in the IOSystem as unique names in order</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">get_sectors</span></code>([entries])</td>
<td>Returns the names of sectors in the IOSystem as unique names in order</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.remove_extension" title="pymrio.core.mriosystem.IOSystem.remove_extension"><code class="xref py py-obj docutils literal"><span class="pre">remove_extension</span></code></a>([ext])</td>
<td>Remove extension from IOSystem</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.report_accounts" title="pymrio.core.mriosystem.IOSystem.report_accounts"><code class="xref py py-obj docutils literal"><span class="pre">report_accounts</span></code></a>(path[,&nbsp;per_region,&nbsp;…])</td>
<td>Generates a report to the given path for all extension</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.reset_all_full" title="pymrio.core.mriosystem.IOSystem.reset_all_full"><code class="xref py py-obj docutils literal"><span class="pre">reset_all_full</span></code></a>()</td>
<td>Removes all accounts that can be recalculated (IOSystem and extensions)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.reset_all_to_coefficients" title="pymrio.core.mriosystem.IOSystem.reset_all_to_coefficients"><code class="xref py py-obj docutils literal"><span class="pre">reset_all_to_coefficients</span></code></a>()</td>
<td>Resets the IOSystem and all extensions to coefficients.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.reset_all_to_flows" title="pymrio.core.mriosystem.IOSystem.reset_all_to_flows"><code class="xref py py-obj docutils literal"><span class="pre">reset_all_to_flows</span></code></a>()</td>
<td>Resets the IOSystem and all extensions to absolute flows</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">reset_full</span></code>()</td>
<td>Remove all accounts which can be recalculated.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">reset_to_coefficients</span></code>()</td>
<td>Keeps only the coefficient.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">reset_to_flows</span></code>()</td>
<td>Keeps only the absolute values.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">save</span></code>(path[,&nbsp;table_format,&nbsp;sep,&nbsp;table_ext,&nbsp;…])</td>
<td>Saves the system as text or binary pickle files.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pymrio.core.mriosystem.IOSystem.save_all" title="pymrio.core.mriosystem.IOSystem.save_all"><code class="xref py py-obj docutils literal"><span class="pre">save_all</span></code></a>(path[,&nbsp;table_format,&nbsp;sep,&nbsp;…])</td>
<td>Saves the system and all extensions</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">set_Y_categories</span></code>(Y_categories)</td>
<td>Sets new names for the Y_categories</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">set_regions</span></code>(regions)</td>
<td>Sets new names for the regions</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">set_sectors</span></code>(sectors)</td>
<td>Sets new names for the sectors</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.aggregate">
<code class="descname">aggregate</code><span class="sig-paren">(</span><em>region_agg=None</em>, <em>sector_agg=None</em>, <em>region_dict=None</em>, <em>sector_dict=None</em>, <em>inplace=True</em>, <em>pre_aggregation=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregates the IO system.</p>
<p>TODO: 2 cases: pre/post aggregation, what happens to
the coefficients…</p>
<p>Aggregation can be given as vector (use pymrio.build_agg_vec) or
aggregation matrix. In the case of a vector this must be of length
self.get_regions() / self.get_sectors() respectively with the new
position as integer or a string of the new name. In the case of
strings the final output order can be specified in region_dict and
sector_dict in the format {str1 = int_pos, str2 = int_pos, …}.</p>
<p>If the sector / region concordance is given as matrix or numerical
vector, generic names will be used for the new sectors/regions. One
can define specific names by defining the aggregation as string
vector</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>region_agg</strong> : list,array or string, optional</p>
<blockquote>
<div><p>The aggregation vector or matrix for the regions (np.ndarray or
list). If string: aggregates to one total region and names is
to the given string.</p>
</div></blockquote>
<p><strong>sector_agg</strong> : list,arrays or string, optional</p>
<blockquote>
<div><p>The aggregation vector or matrix for the sectors (np.ndarray or
list).If string: aggregates to one total region and names is
to the given string.</p>
</div></blockquote>
<p><strong>region_dict</strong> : dict, optional</p>
<blockquote>
<div><p>Information to reorder the aggregated regions</p>
</div></blockquote>
<p><strong>secotor_dict</strong> : dict, optional</p>
<blockquote>
<div><p>Information to reorder the aggregated sectors</p>
</div></blockquote>
<p><strong>inplace</strong> : boolean, optional</p>
<blockquote>
<div><p>If True, aggregates the IOSystem in place (default),
otherwise return a new IOSystem</p>
</div></blockquote>
<p><strong>TODO:pre_aggregation</strong> : boolean, optional</p>
<blockquote>
<div><p>If True, resets the IO system before the aggregation. This
removes all calculated accounts (Footprints, coefficients)
before the calculation. If False (default), all
account which can be aggregated (ergo -  not the coefficients)
are aggregated TODO: fill in coefficients.</p>
</div></blockquote>
<p><strong>TODO: switch for recalc coefficients</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">IOSystem</p>
<blockquote class="last">
<div><p>Aggregated IOSystem (if inplace is False)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.calc_all">
<code class="descname">calc_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.calc_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates missing parts of the IOSystem and all extensions.</p>
<p>This method call calc_system and calc_extensions</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.calc_extensions">
<code class="descname">calc_extensions</code><span class="sig-paren">(</span><em>extensions=None</em>, <em>Y_agg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.calc_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the extension and their accounts</p>
<p>For the calculation, y is aggregated across specified y categories
The method calls .calc_system of each extension (or these given in the
extensions parameter)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>extensions</strong> : list of strings, optional</p>
<blockquote>
<div><p>A list of key names of extensions which shall be calculated.
Default: all dictionaries of IOSystem are assumed to be extensions</p>
</div></blockquote>
<p><strong>Y_agg</strong> : pandas.DataFrame or np.array, optional</p>
<blockquote class="last">
<div><p>The final demand aggregated (one category per country)
Default: y is aggregated over all categories</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.calc_system">
<code class="descname">calc_system</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.calc_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the missing part of the core IOSystem</p>
<p>The method checks Z, x, A, L and calculates all which are None</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.get_extensions">
<code class="descname">get_extensions</code><span class="sig-paren">(</span><em>data=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.get_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields the extensions or their names</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : boolean, optional</p>
<blockquote>
<div><p>If True, returns a generator which yields the extensions.
If False, returns a generator which yields the names of
the extensions (default)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Generator for Extension or string</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.remove_extension">
<code class="descname">remove_extension</code><span class="sig-paren">(</span><em>ext=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.remove_extension" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove extension from IOSystem</p>
<p>For single Extensions the same can be achieved with del
IOSystem_name.Extension_name</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ext</strong> : string or list, optional</p>
<blockquote class="last">
<div><p>The extension to remove, this can be given as the name of the
instance or of Extension.name (the latter will be checked if no
instance was found)
If ext is None (default) all Extensions will be removed</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.report_accounts">
<code class="descname">report_accounts</code><span class="sig-paren">(</span><em>path</em>, <em>per_region=True</em>, <em>per_capita=False</em>, <em>pic_size=1000</em>, <em>format='rst'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.report_accounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a report to the given path for all extension</p>
<p>This method calls .report_accounts for all extensions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> : string</p>
<blockquote>
<div><p>Root path for the report</p>
</div></blockquote>
<p><strong>per_region</strong> : boolean, optional</p>
<blockquote>
<div><p>If true, reports the accounts per region</p>
</div></blockquote>
<p><strong>per_capita</strong> : boolean, optional</p>
<blockquote>
<div><p>If true, reports the accounts per capita
If per_capita and per_region are False, nothing will be done</p>
</div></blockquote>
<p><strong>pic_size</strong> : int, optional</p>
<blockquote>
<div><p>size for the figures in px, 1000 by default</p>
</div></blockquote>
<p><strong>format</strong> : string, optional</p>
<blockquote>
<div><p>file format of the report:
‘rst’(default), ‘html’, ‘latex’, …
except for rst all depend on the module docutils (all writer_name
from docutils can be used as format)</p>
</div></blockquote>
<p><strong>ffname</strong> : string, optional</p>
<blockquote>
<div><p>root file name (without extension, per_capita or per_region will be
attached) and folder names If None gets passed (default), self.name
with be modified to get a valid name for the operation system
without blanks</p>
</div></blockquote>
<p><strong>**kwargs</strong> : key word arguments, optional</p>
<blockquote class="last">
<div><p>This will be passed directly to the pd.DataFrame.plot method
(through the self.plot_account method)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This looks prettier with the seaborn module (import seaborn before
calling this method)</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.reset_all_full">
<code class="descname">reset_all_full</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.reset_all_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all accounts that can be recalculated (IOSystem and extensions)</p>
<p>This calls reset_full for the core system and all extension.
Use this before the aggregation to achieve a pre-aggregation
of the system.</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.reset_all_to_coefficients">
<code class="descname">reset_all_to_coefficients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.reset_all_to_coefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the IOSystem and all extensions to coefficients.</p>
<p>This method calls reset_to_coefficients for the IOSystem and for
all Extensions in the system</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.reset_all_to_flows">
<code class="descname">reset_all_to_flows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.reset_all_to_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the IOSystem and all extensions to absolute flows</p>
<p>This method calls reset_to_flows for the IOSystem and for
all Extensions in the system</p>
</dd></dl>

<dl class="method">
<dt id="pymrio.core.mriosystem.IOSystem.save_all">
<code class="descname">save_all</code><span class="sig-paren">(</span><em>path</em>, <em>table_format='txt'</em>, <em>sep='\t'</em>, <em>table_ext=None</em>, <em>float_format='%.12g'</em><span class="sig-paren">)</span><a class="headerlink" href="#pymrio.core.mriosystem.IOSystem.save_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the system and all extensions</p>
<p>Extensions are saved in separate folders (names based on extension)</p>
<p>Parameters are passed to the .save methods of the IOSystem and
Extensions</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pymrio.core">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pymrio.core" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Konstantin Stadler.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3.dev1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>